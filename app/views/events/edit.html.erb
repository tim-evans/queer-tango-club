<% content_for :title, "#{@event.title} | Queer Tango Club" %>
<br>

<%= form_for(@event) do |f| %>
<section id="edit">
  <div class="frame">
    <header>
      <h2>
        <%= link_to(@event.title, event_path(@event)) %> <%= icon("right-chevron") %> Edit
      </h2>
      <%= f.submit "Save" %>
    </header>
    <hr class="thick">
    <div class="flex-row half">
      <div>
        <div class="flex-column">
          <div>
            <%= f.label :title %>
            <%= f.text_field :title %>
          </div>
          <div class="flex-row half">
            <div>
              <%= f.label :starts_at %>
              <%= f.date_field :starts_at %>
            </div>
            <div>
              <%= f.label :ends_at %>
              <%= f.date_field :ends_at %>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="flex-column">
          <div>
            <%= f.label :description %>
            <%= f.text_area :description, rows: 6 %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <br>

  <div class="frame">
    <header>
      <h6 class="block align-bottom">Cover Photos</h6>
      <a><%= icon("add-solid") %> Add Cover Photo</a>
    </header>
    <hr>
  </div>
  <%= f.fields_for :cover_photos do |cpf| %>
    <figure class="event">
      <div class="cover-photo">
        <img src="<%= cpf.object.attachment.url(:original) %>" alt="<%= cpf.object.title %>"/>
      </div>
      <div class="frame padding-none">
        <figcaption>
          <div class="photo-overlay">
            <%= cpf.text_field :title %>
          </div>
        </figcaption>
      </div>
    </figure>
  <% end %>

  <div class="frame">
    <header>
      <h6>Sessions</h6>
      <a><%= icon("add-solid") %> Add Session</a>
    </header>
    <hr>
    <%= f.fields_for :sessions, html: { class: 'flex-column' } do |sf| %>
      <div>
        <div class="flex-row half">
          <div>
            <div class="flex-column">
              <div>
                <%= sf.label :title %>
                <%= sf.text_field :title %>
              </div>
              <div class="flex-row half">
                <div>
                  <%= sf.label :starts_at %>
                  <%= sf.datetime_local_field :starts_at %>
                </div>
                <div>
                  <%= sf.label :ends_at %>
                  <%= sf.datetime_local_field :ends_at %>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div class="flex-column">
              <div>
                <%= sf.label :description %>
                <%= sf.text_area :description, rows: 6 %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div>
        <%= sf.label :location_id %>
        <%= sf.collection_select(:location_id, Location.all, :id, :name, { prompt: 'Select a Location...' }, autocomplete: 'off') %>
      </div>
      <div>
        <div class="flex-row half">
          <div>
            <label class="accordion <%= 'collapsed' unless sf.object.registerable? %>" data-accordion="<%= sf.object_name.gsub(/[\[\]]+/, '_').chop %>">
              <%= sf.check_box :registerable? %> Online Sales
            </label>
          </div>
          <div id="<%= sf.object_name.gsub(/[\[\]]+/, '_').chop %>">
            <div class="flex-column">
              <div>
                <%= sf.label :display_cost, 'Ticket cost' %>
                <%= sf.text_field :display_cost %>
              </div>
              <div>
                <%= sf.label :max_attendees, 'Total tickets' %>
                <%= sf.number_field :max_attendees %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <br>
      <hr>
      <br>
    <% end %>
  </div>
</section>
<% end %>
